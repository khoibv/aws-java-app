<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:with="lang=${#locale.language}"
      th:lang="${lang}">
<head th:fragment="head">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
  <link th:href="@{/css/product.css}" rel="stylesheet"/>
  <link th:href="@{/css/fa-svg-with-js.css}" rel="stylesheet"/>
  <script th:src="@{/js/jquery-3.2.1.min.js}" type="text/javascript"></script>
  <script th:src="@{/js/bootstrap.min.js}" type="text/javascript"></script>
  <script th:src="@{/js/fontawesome-all.min.js}" type="text/javascript"></script>
</head>
<body>
<div class="container">
  <div class="message alert alert-success sr-only" th:text="${message}" role="alert">
  </div>
  <h3>Product list</h3>
  <div class="panel panel-default">
    <div class="panel-heading row">
      <h4 th:text="${'Search'}"></h4>
    </div>
    <div class="panel-body">
      <form method="post" th:action="@{/product/search}" th:object="${searchForm}">
        <input type="text" placeholder="Product name" th:field="*{productName}" class="form-control"/>
        <select class="form-control category-field" th:field="*{category}">
          <option th:text="${'Please select'}" value=""></option>
          <option th:text="Fruit" value="Fruit"></option>
          <option th:text="Vegetable" value="Vegetable"></option>
        </select>
        <button type="submit" class="btn btn-default" >
          <i class="fas fa-search"></i>
          <span th:text="#{button.search}"></span>
        </button>
      </form>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered table-hover">
      <thead class="thead-dark">
      <tr>
        <th>Name</th>
        <th>Category</th>
        <th>Price</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="product : ${products}">
        <td th:text="${product.productName}"></td>
        <td th:text="${product.category}"></td>
        <td th:text="${product.price}"></td>
        <td>
          <a th:href="@{/product/update(id=${product.id})}">Edit</a>
          <span class="delimiter">|</span>
          <a th:href="@{/product/delete(id=${product.id})}" class="deleteLink">Delete</a>
          <input type="hidden" th:value="${product.id}" class="id" />
        </td>
      </tr>

      </tbody>


    </table>
  </div>
  <a th:href="@{/product/create}">Create new</a>
</div>
<script th:src="@{/js/product.js}" type="text/javascript"></script>
<script type="text/javascript" th:inline="javascript">
  var urls = {
    product: {
      delete: [[@{/product/delete}]]
    }
  };

</script>
</body>
</html>